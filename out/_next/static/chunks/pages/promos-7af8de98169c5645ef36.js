_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"5Woq":function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),o=r("xvhg"),c=r("q1tI"),a=r.n(c),i=r("R/WZ"),s=r("Lqff"),u=r("20a2"),l=r("Iljs"),j=r("NKQG"),d=r("30+C"),O=r("lFIR"),p=r("Ie8z"),b=r("oa/T"),m=r("o4QW"),f=r("Z3vd"),h=r("PsDL"),g=r("ofer"),v=r("Ji2X"),x=r("tRbT"),y=r("3Yvs"),P=r("MPUk"),R=r.n(P),w=r("xMF9"),E=r.n(w),S=r("7frF"),_=r.n(S),T=r("CRf/"),C=r.n(T),k=r("p7UQ"),M=r("j7uD");t.default=function(){var e=N(),t=Object(s.b)(),r=Object(o.a)(t,2),i=r[0],P=(r[1],Object(l.c)()),w=Object(o.a)(P,2),S=w[0],T=w[1],q=Object(c.useState)(!1),D=q[0],I=q[1],z=Object(c.useState)(null),G=z[0],U=z[1],W=Object(u.useRouter)(),A=Object(j.b)(),F=A.enqueueSnackbar;A.closeSnackbar;Object(c.useEffect)((function(){i.user.email||W.push("/login"),L()}),[]);var L=function(){Object(M.e)("promos").then((function(e){return T({type:l.a.SET_PROMOS,payload:e.docs.map((function(e){return e.data()}))})}))};return Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(k.a,{}),Object(n.jsx)(v.a,{maxWidth:"lg",className:e.marginTop,children:i.user.email?Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsxs)(g.a,{className:e.title,variant:"h4",children:["Listado de promos",Object(n.jsx)(f.a,{color:"primary",className:e.floatRight,onClick:function(){return W.push("/promos/add")},children:"Agregar Promo"})]}),Object(n.jsx)(y.a,{isOpen:D,handleConfirm:function(){Object(M.c)({selectedId:G,collection:"promos"}).then((function(){F("Se elimin\xf3 la promo correctamente",{variant:"success"}),I(!1),L()})).catch((function(e){return F("Ha sucedido un error",{variant:"error"})}))},handleClose:function(){return I(!1)},question:"\xbfSeguro quer\xe9s borrar esta promo?"}),Object(n.jsx)(x.a,{container:!0,spacing:2,children:null===S||void 0===S?void 0:S.promos.map((function(t){return Object(n.jsx)(x.a,{item:!0,xs:12,lg:+t.cols,children:Object(n.jsxs)(d.a,{children:[Object(n.jsxs)(O.a,{children:[Object(n.jsx)(p.a,{className:e.media,image:t.picture,title:t.name}),Object(n.jsxs)(b.a,{children:[Object(n.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(n.jsx)(g.a,{variant:"body2",color:"textSecondary",component:"p",children:t.description})]})]}),Object(n.jsxs)(m.a,{children:[Object(n.jsx)(h.a,{size:"small",color:"primary",onClick:function(){return W.push("/promos/".concat(t.id,"/edit"))},children:Object(n.jsx)(R.a,{})}),Object(n.jsx)(h.a,{size:"small",color:"primary",onClick:function(){return e=t.id,I(!0),void U(e);var e},children:Object(n.jsx)(E.a,{})}),Object(n.jsx)(h.a,{size:"small",color:"primary",onClick:function(){return function(e){var t=e.id,r=e.publish;Object(M.g)({id:t,publish:r,collection:"promos"}).then((function(){F("Se actualiz\xf3 el estado correctamente",{variant:"success"}),L()})).catch((function(){return F("Ha sucedido un error",{variant:"error"})}))}(t)},children:t.publish?Object(n.jsx)(_.a,{}):Object(n.jsx)(C.a,{})})]})]})},t.id)}))})]}):Object(n.jsx)("div",{})})]})};var N=Object(i.a)((function(e){return{root:{overflow:"hidden",backgroundColor:e.palette.background.paper},marginTop:{margin:e.spacing("70px","auto")},floatRight:{float:"right"},gridList:{width:1200,height:"auto"},media:{height:140},icon:{color:"rgba(255, 255, 255, 0.54)"},title:{marginTop:"2rem",marginBottom:"2rem"}}}))},Iljs:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return b}));var n=r("nKUr"),o=r("cpVT"),c=r("q1tI"),a=r.n(c),i=r("j7uD");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=a.a.createContext({}),j={promo:{},promos:[]},d={CREATE_PROMO:"CREATE_PROMO",SET_PROMO:"SET_PROMO",SET_PROMOS:"SET_PROMOS"},O=function(e,t){switch(t.type){case d.CREATE_PROMO:var r=(new Date).getTime().toString();return void i.b.firestore().collection("promos").doc(r).set(u(u({},t.payload),{},{id:r})).then((function(){return console.log("promo agregada")})).catch((function(e){return console.log("error al agregar una promo")}));case d.SET_PROMO:return u(u({},e),{},{promo:t.payload});case d.SET_PROMOS:return u(u({},e),{},{promos:t.payload||[]});default:throw new Error("Unhandled action type: ".concat(t.type))}},p=function(e){var t=e.children,r=Object(c.useReducer)(O,j),o=r[0],a=r[1];return Object(n.jsx)(l.Provider,{value:[o,a],children:t})},b=function(){return Object(c.useContext)(l)}},RGGt:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/promos",function(){return r("5Woq")}])}},[["RGGt",1,2,4,5,0,3,7,6,8,11]]]);