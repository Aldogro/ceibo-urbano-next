_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{"20a2":function(e,t,r){e.exports=r("nOHt")},my7y:function(e,t,r){"use strict";r.r(t);var c=r("nKUr"),o=r("xvhg"),a=r("q1tI"),n=r.n(a),i=r("R/WZ"),s=r("Lqff"),l=r("20a2"),d=r("wx14"),u=r("Ff2n"),p=(r("17x9"),r("iuhU")),b=r("kKAo"),O=r("H2TA"),f=a.forwardRef((function(e,t){var r=e.classes,c=e.className,o=e.raised,n=void 0!==o&&o,i=Object(u.a)(e,["classes","className","raised"]);return a.createElement(b.a,Object(d.a)({className:Object(p.a)(r.root,c),elevation:n?8:1,ref:t},i))})),m=Object(O.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(f),j=r("VD++"),h=a.forwardRef((function(e,t){var r=e.children,c=e.classes,o=e.className,n=e.focusVisibleClassName,i=Object(u.a)(e,["children","classes","className","focusVisibleClassName"]);return a.createElement(j.a,Object(d.a)({className:Object(p.a)(c.root,o),focusVisibleClassName:Object(p.a)(n,c.focusVisible),ref:t},i),r,a.createElement("span",{className:c.focusHighlight}))})),g=Object(O.a)((function(e){return{root:{display:"block",textAlign:"inherit",width:"100%","&:hover $focusHighlight":{opacity:e.palette.action.hoverOpacity},"&$focusVisible $focusHighlight":{opacity:.12}},focusVisible:{},focusHighlight:{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}}),{name:"MuiCardActionArea"})(h),T=["video","audio","picture","iframe","img"],v=a.forwardRef((function(e,t){var r=e.children,c=e.classes,o=e.className,n=e.component,i=void 0===n?"div":n,s=e.image,l=e.src,b=e.style,O=Object(u.a)(e,["children","classes","className","component","image","src","style"]),f=-1!==T.indexOf(i),m=!f&&s?Object(d.a)({backgroundImage:'url("'.concat(s,'")')},b):b;return a.createElement(i,Object(d.a)({className:Object(p.a)(c.root,o,f&&c.media,-1!=="picture img".indexOf(i)&&c.img),ref:t,style:m,src:f?s||l:void 0},O),r)})),E=Object(O.a)({root:{display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},media:{width:"100%"},img:{objectFit:"cover"}},{name:"MuiCardMedia"})(v),y=a.forwardRef((function(e,t){var r=e.classes,c=e.className,o=e.component,n=void 0===o?"div":o,i=Object(u.a)(e,["classes","className","component"]);return a.createElement(n,Object(d.a)({className:Object(p.a)(r.root,c),ref:t},i))})),C=Object(O.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(y),R=a.forwardRef((function(e,t){var r=e.disableSpacing,c=void 0!==r&&r,o=e.classes,n=e.className,i=Object(u.a)(e,["disableSpacing","classes","className"]);return a.createElement("div",Object(d.a)({className:Object(p.a)(o.root,n,!c&&o.spacing),ref:t},i))})),P=Object(O.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(R),w=r("Z3vd"),D=r("ofer"),x=r("Ji2X"),_=r("tRbT"),N=r("p7UQ"),U=r("j7uD"),S=r("qwQT"),k=(t.default=function(){var e=k(),t=Object(s.b)(),r=Object(o.a)(t,2),i=r[0],d=(r[1],Object(S.c)()),u=Object(o.a)(d,2),p=u[0],b=u[1],O=Object(l.useRouter)();Object(a.useEffect)((function(){i.user.email||O.push("/login"),U.a.collection("products").get().then((function(e){return b({type:S.a.SET_PRODUCTS,payload:e.docs.map((function(e){return e.data()}))})}))}),[p]);return Object(c.jsxs)(n.a.Fragment,{children:[Object(c.jsx)(N.a,{}),Object(c.jsx)(x.a,{maxWidth:"lg",children:i.user.email?Object(c.jsxs)("div",{className:e.root,children:[Object(c.jsxs)(D.a,{className:e.title,variant:"h4",children:["Listado de productos",Object(c.jsx)(w.a,{color:"primary",className:e.floatRight,onClick:function(){return O.push("/products/add")},children:"Agregar Producto"})]}),Object(c.jsx)(_.a,{container:!0,spacing:2,children:null===p||void 0===p?void 0:p.products.map((function(t){return Object(c.jsx)(_.a,{item:!0,xs:+t.cols,children:Object(c.jsxs)(m,{children:[Object(c.jsxs)(g,{children:[Object(c.jsx)(E,{className:e.media,image:t.picture,title:t.name}),Object(c.jsxs)(C,{children:[Object(c.jsx)(D.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(c.jsx)(D.a,{variant:"body2",color:"textSecondary",component:"p",children:t.description})]})]}),Object(c.jsxs)(P,{children:[Object(c.jsx)(w.a,{size:"small",color:"primary",onClick:function(){return O.push("/products/".concat(t.id,"/edit"))},children:"Editar"}),Object(c.jsx)(w.a,{size:"small",color:"primary",onClick:function(){return e=t.id,void b({type:S.a.DELETE_PRODUCT,payload:e});var e},children:"Borrar"})]})]})},t.id)}))})]}):Object(c.jsx)("div",{})})]})},Object(i.a)((function(e){return{root:{overflow:"hidden",backgroundColor:e.palette.background.paper},floatRight:{float:"right"},gridList:{width:1200,height:"auto"},media:{height:140},icon:{color:"rgba(255, 255, 255, 0.54)"},title:{marginTop:"2rem",marginBottom:"2rem"}}})))},pqrm:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r("my7y")}])},qwQT:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return f}));var c=r("nKUr"),o=r("cpVT"),a=r("q1tI"),n=r.n(a),i=r("j7uD");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=n.a.createContext({}),u={product:{},products:[]},p={CREATE_PRODUCT:"CREATE_PRODUCT",GET_PRODUCT:"GET_PRODUCT",GET_PRODUCTS:"GET_PRODUCTS",SET_PRODUCT:"SET_PRODUCT",SET_PRODUCTS:"SET_PRODUCTS",DELETE_PRODUCT:"DELETE_PRODUCT",UPDATE_PRODUCT:"UPDATE_PRODUCT"},b=function(e,t){switch(t.type){case p.CREATE_PRODUCT:var r=(new Date).getTime().toString();return void i.a.collection("products").doc(r).set(l(l({},t.payload),{},{id:r})).then((function(){return console.log("producto creado")})).catch((function(e){return console.log(e)}));case p.SET_PRODUCT:return l(l({},e),{},{product:t.payload});case p.SET_PRODUCTS:return l(l({},e),{},{products:t.payload});case p.DELETE_PRODUCT:return void i.a.collection("products").doc(t.payload.toString()).delete().then((function(){return console.log("elemento borrado")})).catch((function(e){return console.log(e)}));default:throw new Error("Unhandled action type: ".concat(t.type))}},O=function(e){var t=e.children,r=Object(a.useReducer)(b,u),o=r[0],n=r[1];return Object(c.jsx)(d.Provider,{value:[o,n],children:t})},f=function(){return Object(a.useContext)(d)}}},[["pqrm",1,2,4,5,0,3,6,8]]]);