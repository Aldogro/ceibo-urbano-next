_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{my7y:function(t,e,r){"use strict";r.r(e);var n=r("nKUr"),o=r("xvhg"),c=r("q1tI"),a=r.n(c),i=r("R/WZ"),s=r("Lqff"),u=r("20a2"),d=r("30+C"),l=r("lFIR"),p=r("Ie8z"),O=r("oa/T"),j=r("o4QW"),b=r("Z3vd"),f=r("PsDL"),T=r("ofer"),h=r("Ji2X"),m=r("tRbT"),g=r("3Yvs"),E=r("MPUk"),P=r.n(E),D=r("xMF9"),y=r.n(D),C=r("p7UQ"),_=r("j7uD"),R=r("qwQT");e.default=function(){var t=x(),e=Object(s.b)(),r=Object(o.a)(e,2),i=r[0],E=(r[1],Object(R.c)()),D=Object(o.a)(E,2),v=D[0],U=D[1],w=Object(c.useState)(!1),S=w[0],N=w[1],k=Object(c.useState)(null),q=k[0],L=k[1],A=Object(u.useRouter)();Object(c.useEffect)((function(){i.user.email||A.push("/login"),_.a.firestore().collection("products").get().then((function(t){return U({type:R.a.SET_PRODUCTS,payload:t.docs.map((function(t){return t.data()}))})}))}),[]);return Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(C.a,{}),Object(n.jsx)(h.a,{maxWidth:"lg",className:t.marginTop,children:i.user.email?Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsxs)(T.a,{className:t.title,variant:"h4",children:["Listado de productos",Object(n.jsx)(b.a,{color:"primary",className:t.floatRight,onClick:function(){return A.push("/products/add")},children:"Agregar Producto"})]}),Object(n.jsx)(g.a,{isOpen:S,handleConfirm:function(){return U({type:R.a.DELETE_PRODUCT,payload:q}),N(!1),void _.a.firestore().collection("products").get().then((function(t){return U({type:R.a.SET_PRODUCTS,payload:t.docs.map((function(t){return t.data()}))})}))},handleClose:function(){return N(!1)},question:"\xbfSeguro quer\xe9s borrar este producto?"}),Object(n.jsx)(m.a,{container:!0,spacing:2,children:null===v||void 0===v?void 0:v.products.map((function(e){return Object(n.jsx)(m.a,{item:!0,xs:12,lg:+e.cols,children:Object(n.jsxs)(d.a,{children:[Object(n.jsxs)(l.a,{children:[Object(n.jsx)(p.a,{className:t.media,image:e.picture,title:e.name}),Object(n.jsxs)(O.a,{children:[Object(n.jsx)(T.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.name}),Object(n.jsx)(T.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description})]})]}),Object(n.jsxs)(j.a,{children:[Object(n.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return A.push("/products/".concat(e.id,"/edit"))},children:Object(n.jsx)(P.a,{})}),Object(n.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return t=e.id,N(!0),void L(t);var t},children:Object(n.jsx)(y.a,{})})]})]})},e.id)}))})]}):Object(n.jsx)("div",{})})]})};var x=Object(i.a)((function(t){return{root:{overflow:"hidden",backgroundColor:t.palette.background.paper},floatRight:{float:"right"},gridList:{width:1200,height:"auto"},media:{height:140},marginTop:{margin:t.spacing("70px","auto")},icon:{color:"rgba(255, 255, 255, 0.54)"},title:{marginTop:"2rem",marginBottom:"2rem"}}}))},pqrm:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r("my7y")}])},qwQT:function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return j})),r.d(e,"c",(function(){return b}));var n=r("nKUr"),o=r("cpVT"),c=r("q1tI"),a=r.n(c),i=r("j7uD");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d=a.a.createContext({}),l={product:{},products:[]},p={CREATE_PRODUCT:"CREATE_PRODUCT",GET_PRODUCT:"GET_PRODUCT",GET_PRODUCTS:"GET_PRODUCTS",SET_PRODUCT:"SET_PRODUCT",SET_PRODUCTS:"SET_PRODUCTS",DELETE_PRODUCT:"DELETE_PRODUCT",UPDATE_PRODUCT:"UPDATE_PRODUCT"},O=function(t,e){switch(e.type){case p.CREATE_PRODUCT:var r=(new Date).getTime().toString();return void i.a.firestore().collection("products").doc(r).set(u(u({},e.payload),{},{id:r})).then((function(){return console.log("producto creado")})).catch((function(t){return console.log(t)}));case p.SET_PRODUCT:return u(u({},t),{},{product:e.payload});case p.SET_PRODUCTS:return u(u({},t),{},{products:e.payload});case p.DELETE_PRODUCT:return void i.a.firestore().collection("products").doc(e.payload.toString()).delete().then((function(){return console.log("elemento borrado")})).catch((function(t){return console.log(t)}));default:throw new Error("Unhandled action type: ".concat(e.type))}},j=function(t){var e=t.children,r=Object(c.useReducer)(O,l),o=r[0],a=r[1];return Object(n.jsx)(d.Provider,{value:[o,a],children:e})},b=function(){return Object(c.useContext)(d)}}},[["pqrm",0,1,4,5,2,3,6,7,10]]]);