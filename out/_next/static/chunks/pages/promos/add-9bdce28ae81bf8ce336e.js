_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{"0O4B":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/promos/add",function(){return n("wlUP")}])},Iljs:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return m}));var r=n("nKUr"),a=n("cpVT"),c=n("q1tI"),o=n.n(c),i=n("j7uD");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=o.a.createContext({}),O={promo:{},promos:[]},j={CREATE_PROMO:"CREATE_PROMO",GET_PROMO:"GET_PROMO",GET_PROMOS:"GET_PROMOS",SET_PROMO:"SET_PROMO",SET_PROMOS:"SET_PROMOS",DELETE_PROMO:"DELETE_PROMO",UPDATE_PROMO:"UPDATE_PROMO"},d=function(e,t){switch(t.type){case j.CREATE_PROMO:var n=(new Date).getTime().toString();return void i.a.firestore().collection("promos").doc(n).set(l(l({},t.payload),{},{id:n})).then((function(){return console.log("promo creada")})).catch((function(e){return console.log(e)}));case j.SET_PROMO:return l(l({},e),{},{promo:t.payload});case j.SET_PROMOS:return l(l({},e),{},{promos:t.payload||[]});case j.DELETE_PROMO:return void i.a.firestore().collection("promos").doc(t.payload.toString()).delete().then((function(){return console.log("promo borrada")})).catch((function(e){return console.log(e)}));default:throw new Error("Unhandled action type: ".concat(t.type))}},b=function(e){var t=e.children,n=Object(c.useReducer)(d,O),a=n[0],o=n[1];return Object(r.jsx)(u.Provider,{value:[a,o],children:t})},m=function(){return Object(c.useContext)(u)}},jgTA:function(e,t,n){"use strict";var r=n("nKUr"),a=n("q1tI"),c=n.n(a),o=n("Z3vd"),i=n("tRbT"),s=n("r9w1"),l=n("g3U7"),u=n("UhlP"),O=n("ZGBi"),j=n("LnxZ"),d=n("R/WZ"),b=n("j7uD"),m=n("20a2");t.a=function(e){var t=e.promo,n=void 0===t?{}:t,d=e.onSubmit,f=Object(a.useState)(""),h=f[0],g=f[1],x=Object(a.useState)(""),v=x[0],P=x[1],E=Object(a.useState)(""),R=E[0],_=E[1],y=Object(a.useState)(""),T=y[0],w=y[1],S=Object(a.useState)(""),M=S[0],N=S[1],D=Object(a.useState)(!1),C=D[0],U=D[1],W=Object(m.useRouter)(),A=function(e){e.preventDefault(),d({name:h,description:v,price:R,cols:T,picture:M,publish:C})};Object(a.useEffect)((function(){0!==Object.keys(n).length&&(g(n.name),P(n.description),_(n.price),w(n.cols),N(n.picture),U(n.publish))}),[n]);var k=p();return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)("form",{className:k.root,onSubmit:function(e){return A(e)},noValidate:!0,autoComplete:"off",children:[Object(r.jsxs)(i.a,{container:!0,spacing:3,cols:1,children:[Object(r.jsx)(i.a,{item:!0,xs:12,lg:3,children:Object(r.jsx)(O.a,{control:Object(r.jsx)(u.a,{checked:C,onChange:function(e){var t=e.target;return U(t.checked)},color:"primary"}),label:"Publicar"})}),Object(r.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(s.a,{className:k.fullWidth,id:"Name",label:"Nombre",value:h,required:!0,onChange:function(e){var t=e.target;return g(t.value)}})}),Object(r.jsx)(i.a,{item:!0,xs:12,md:3,children:Object(r.jsx)(s.a,{className:k.fullWidth,id:"cols",label:"Columnas",type:"number",value:T,onChange:function(e){var t=e.target;return w(t.value)}})}),Object(r.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(s.a,{className:k.fullWidth,id:"Price",label:"Precio",type:"number",value:R,onChange:function(e){var t=e.target;return _(t.value)}})}),Object(r.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(l.a,{"aria-label":"empty textarea",className:k.fullWidth,placeholder:"Descripci\xf3n",id:"Description",label:"Descripci\xf3n",value:v,onChange:function(e){var t=e.target;return P(t.value)}})}),Object(r.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(j.a,{acceptedFiles:["image/*"],filesLimit:1,onChange:function(e){return function(e){e.length&&b.a.storage().ref().child("/images").child(e[0].name).put(e[0]).then((function(e){return b.a.storage().ref(e.metadata.fullPath).getDownloadURL()})).then((function(e){return N(e)}))}(e)},onDelete:function(){return N("")}})}),M?Object(r.jsx)(i.a,{item:!0,xs:6,children:Object(r.jsx)("div",{className:k.contain,children:Object(r.jsx)("img",{className:k.fullWidth,src:M,alt:"promo image"})})}):Object(r.jsx)("div",{})]}),Object(r.jsxs)(i.a,{item:!0,xs:12,className:k.actions,children:[Object(r.jsx)(o.a,{className:k.floatRight,variant:"contained",type:"submit",color:"primary",children:"Guardar"}),Object(r.jsx)(o.a,{className:k.floatRight,variant:"contained",color:"secondary",onClick:function(){return W.push("/promos")},children:"Cancelar"})]})]})})};var p=Object(d.a)((function(e){return{actions:{margin:e.spacing("20px",0)},contain:{maxHeight:"250px",width:"100%",display:"flex"},fullWidth:{width:"100%",maxHeigth:"100%",objectFit:"contain"},floatRight:{minWidth:120,float:"right",marginLeft:16}}}))},wlUP:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),a=n("xvhg"),c=n("q1tI"),o=n.n(c),i=n("20a2"),s=n("p7UQ"),l=n("Ji2X"),u=n("ofer"),O=n("jgTA"),j=n("R/WZ"),d=n("Iljs");t.default=function(){var e=Object(i.useRouter)(),t=Object(d.c)(""),n=Object(a.a)(t,2),c=(n[0],n[1]),j=b();return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)(s.a,{}),Object(r.jsxs)(l.a,{maxWidth:"lg",className:j.root,children:[Object(r.jsx)(u.a,{className:j.title,variant:"h4",children:"Agregar Promo"}),Object(r.jsx)(O.a,{onSubmit:function(t){return function(t){c({type:d.a.CREATE_PROMO,payload:t}),e.push("/promos")}(t)}})]})]})};var b=Object(j.a)((function(e){return{root:{marginTop:"70px",marginBottom:"90px"},title:{marginTop:"2rem",marginBottom:"2rem"}}}))}},[["0O4B",0,1,4,5,2,3,6,7,8,9]]]);