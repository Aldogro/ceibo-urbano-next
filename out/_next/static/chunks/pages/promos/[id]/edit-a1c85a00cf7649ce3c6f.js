_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{Iljs:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return m}));var n=r("nKUr"),o=r("cpVT"),c=r("q1tI"),a=r.n(c),i=r("j7uD");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=a.a.createContext({}),O={promo:{},promos:[],maxDiscount:0},d={CREATE_PROMO:"CREATE_PROMO",SET_PROMO:"SET_PROMO",SET_PROMOS:"SET_PROMOS",GET_MAX_DISCOUNT:"GET_MAX_DISCOUNT"},l=function(e,t){switch(t.type){case d.CREATE_PROMO:var r=(new Date).getTime().toString();return void i.c.firestore().collection("promos").doc(r).set(s(s({},t.payload),{},{id:r})).then((function(){return console.log("promo agregada")})).catch((function(e){return console.log("error al agregar una promo")}));case d.SET_PROMO:return s(s({},e),{},{promo:t.payload});case d.SET_PROMOS:return s(s({},e),{},{promos:t.payload||[]});case d.GET_MAX_DISCOUNT:var n=0;return e.promos.forEach((function(e){e.discount<n&&(n=e.discount)})),s(s({},e),{},{maxDiscount:-1*n});default:throw new Error("Unhandled action type: ".concat(t.type))}},f=function(e){var t=e.children,r=Object(c.useReducer)(l,O),o=r[0],a=r[1];return Object(n.jsx)(p.Provider,{value:[o,a],children:t})},m=function(){return Object(c.useContext)(p)}},mwgd:function(e,t,r){"use strict";r.r(t);var n=r("cpVT"),o=r("nKUr"),c=r("xvhg"),a=r("q1tI"),i=r.n(a),u=r("20a2"),s=r("Iljs"),p=r("R/WZ"),O=r("NKQG"),d=r("p7UQ"),l=r("jgTA"),f=r("Ji2X"),m=r("ofer"),b=r("j7uD");t.default=function(){var e=Object(s.c)(),t=Object(c.a)(e,2),r=t[0],n=t[1],p=j(),_=Object(u.useRouter)(),g=Object(O.b)(),E=g.enqueueSnackbar;g.closeSnackbar;Object(a.useEffect)((function(){var e=_.query.id;_.query.id&&h(e)}),[_.query]);var h=function(e){Object(b.g)({collection:"promos",id:e}).then((function(e){n({type:s.a.SET_PROMO,payload:e.data()})}))};return Object(o.jsxs)(i.a.Fragment,{children:[Object(o.jsx)(d.a,{}),Object(o.jsxs)(f.a,{className:p.container,children:[Object(o.jsx)(m.a,{className:p.title,variant:"h4",children:"Editar Promos"}),null!==r&&void 0!==r&&r.promo?Object(o.jsx)(l.a,{onSubmit:function(e){return function(e){Object(b.e)({collection:"promos",id:_.query.id,data:e}).then((function(){E("Se ha editado la promo correctamente",{variant:"success"}),_.push("/promos")})).catch((function(e){return E("Ha ocurrido un error",{variant:"error"})}))}(e)},promo:r.promo}):null]})]})};var j=Object(p.a)((function(e){return{container:{margin:e.spacing("70px","auto")},title:Object(n.a)({marginTop:"1rem",marginBottom:"1rem",fontSize:"18px"},e.breakpoints.up("sm"),{marginTop:"2rem",marginBottom:"1rem",fontSize:"24px"})}}))},sUPp:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/promos/[id]/edit",function(){return r("mwgd")}])}},[["sUPp",1,2,4,5,0,3,7,6,8,9,10,11,12]]]);