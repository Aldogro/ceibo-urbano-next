_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"5Woq":function(e,t,r){"use strict";r.r(t);var o=r("nKUr"),n=r("xvhg"),c=r("q1tI"),a=r.n(c),i=r("R/WZ"),s=r("Lqff"),u=r("20a2"),l=r("30+C"),O=r("lFIR"),d=r("Ie8z"),p=r("oa/T"),j=r("o4QW"),b=r("Z3vd"),f=r("PsDL"),m=r("ofer"),h=r("Ji2X"),g=r("tRbT"),E=r("3Yvs"),P=r("MPUk"),x=r.n(P),R=r("xMF9"),_=r.n(R),v=r("7frF"),T=r.n(v),y=r("CRf/"),w=r.n(y),M=r("p7UQ"),S=r("j7uD"),C=r("Iljs");t.default=function(){var e=D(),t=Object(s.b)(),r=Object(n.a)(t,2),i=r[0],P=(r[1],Object(C.c)()),R=Object(n.a)(P,2),v=R[0],y=R[1],k=Object(c.useState)(!1),N=k[0],G=k[1],L=Object(c.useState)(null),q=L[0],U=L[1],A=Object(u.useRouter)();Object(c.useEffect)((function(){i.user.email||A.push("/login"),I()}),[]);var I=function(){S.a.firestore().collection("promos").get().then((function(e){return y({type:C.a.SET_PROMOS,payload:e.docs.map((function(e){return e.data()}))})}))};return Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsx)(M.a,{}),Object(o.jsx)(h.a,{maxWidth:"lg",className:e.marginTop,children:i.user.email?Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsxs)(m.a,{className:e.title,variant:"h4",children:["Listado de promos",Object(o.jsx)(b.a,{color:"primary",className:e.floatRight,onClick:function(){return A.push("/promos/add")},children:"Agregar Promo"})]}),Object(o.jsx)(E.a,{isOpen:N,handleConfirm:function(){return y({type:C.a.DELETE_PROMO,payload:q}),G(!1),void I()},handleClose:function(){return G(!1)},question:"\xbfSeguro quer\xe9s borrar esta promo?"}),Object(o.jsx)(g.a,{container:!0,spacing:2,children:null===v||void 0===v?void 0:v.promos.map((function(t){return Object(o.jsx)(g.a,{item:!0,xs:12,lg:+t.cols,children:Object(o.jsxs)(l.a,{children:[Object(o.jsxs)(O.a,{children:[Object(o.jsx)(d.a,{className:e.media,image:t.picture,title:t.name}),Object(o.jsxs)(p.a,{children:[Object(o.jsx)(m.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(o.jsx)(m.a,{variant:"body2",color:"textSecondary",component:"p",children:t.description})]})]}),Object(o.jsxs)(j.a,{children:[Object(o.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return A.push("/promos/".concat(t.id,"/edit"))},children:Object(o.jsx)(x.a,{})}),Object(o.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return e=t.id,G(!0),void U(e);var e},children:Object(o.jsx)(_.a,{})}),Object(o.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return function(e){var t=e.id,r=e.publish;S.a.firestore().collection("promos").doc(t).update({publish:!r}).then((function(){return I()}))}(t)},children:t.publish?Object(o.jsx)(T.a,{}):Object(o.jsx)(w.a,{})})]})]})},t.id)}))})]}):Object(o.jsx)("div",{})})]})};var D=Object(i.a)((function(e){return{root:{overflow:"hidden",backgroundColor:e.palette.background.paper},marginTop:{margin:e.spacing("70px","auto")},floatRight:{float:"right"},gridList:{width:1200,height:"auto"},media:{height:140},icon:{color:"rgba(255, 255, 255, 0.54)"},title:{marginTop:"2rem",marginBottom:"2rem"}}}))},Iljs:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return b}));var o=r("nKUr"),n=r("cpVT"),c=r("q1tI"),a=r.n(c),i=r("j7uD");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=a.a.createContext({}),O={promo:{},promos:[]},d={CREATE_PROMO:"CREATE_PROMO",GET_PROMO:"GET_PROMO",GET_PROMOS:"GET_PROMOS",SET_PROMO:"SET_PROMO",SET_PROMOS:"SET_PROMOS",DELETE_PROMO:"DELETE_PROMO",UPDATE_PROMO:"UPDATE_PROMO"},p=function(e,t){switch(t.type){case d.CREATE_PROMO:var r=(new Date).getTime().toString();return void i.a.firestore().collection("promos").doc(r).set(u(u({},t.payload),{},{id:r})).then((function(){return console.log("promo creada")})).catch((function(e){return console.log(e)}));case d.SET_PROMO:return u(u({},e),{},{promo:t.payload});case d.SET_PROMOS:return u(u({},e),{},{promos:t.payload||[]});case d.DELETE_PROMO:return void i.a.firestore().collection("promos").doc(t.payload.toString()).delete().then((function(){return console.log("promo borrada")})).catch((function(e){return console.log(e)}));default:throw new Error("Unhandled action type: ".concat(t.type))}},j=function(e){var t=e.children,r=Object(c.useReducer)(p,O),n=r[0],a=r[1];return Object(o.jsx)(l.Provider,{value:[n,a],children:t})},b=function(){return Object(c.useContext)(l)}},RGGt:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/promos",function(){return r("5Woq")}])}},[["RGGt",0,1,4,5,2,3,6,7,10]]]);