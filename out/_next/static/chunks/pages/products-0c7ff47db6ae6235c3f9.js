_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{my7y:function(t,e,r){"use strict";r.r(e);var n=r("nKUr"),c=r("xvhg"),o=r("q1tI"),a=r.n(o),i=r("R/WZ"),s=r("Lqff"),u=r("20a2"),l=r("30+C"),d=r("lFIR"),p=r("Ie8z"),j=r("oa/T"),O=r("o4QW"),b=r("Z3vd"),f=r("PsDL"),h=r("ofer"),T=r("Ji2X"),m=r("tRbT"),g=r("3Yvs"),E=r("MPUk"),P=r.n(E),C=r("xMF9"),D=r.n(C),x=r("7frF"),y=r.n(x),_=r("CRf/"),v=r.n(_),R=r("p7UQ"),U=r("j7uD"),w=r("qwQT");e.default=function(){var t=S(),e=Object(s.b)(),r=Object(c.a)(e,2),i=r[0],E=(r[1],Object(w.c)()),C=Object(c.a)(E,2),x=C[0],_=C[1],k=Object(o.useState)(!1),N=k[0],q=k[1],L=Object(o.useState)(null),A=L[0],z=L[1],F=Object(u.useRouter)();Object(o.useEffect)((function(){i.user.email||F.push("/login"),G()}),[]);var G=function(){U.a.firestore().collection("products").get().then((function(t){return _({type:w.a.SET_PRODUCTS,payload:t.docs.map((function(t){return t.data()}))})}))};return Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(R.a,{}),Object(n.jsx)(T.a,{maxWidth:"lg",className:t.marginTop,children:i.user.email?Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsxs)(h.a,{className:t.title,variant:"h4",children:["Listado de productos",Object(n.jsx)(b.a,{color:"primary",className:t.floatRight,onClick:function(){return F.push("/products/add")},children:"Agregar Producto"})]}),Object(n.jsx)(g.a,{isOpen:N,handleConfirm:function(){return _({type:w.a.DELETE_PRODUCT,payload:A}),q(!1),void G()},handleClose:function(){return q(!1)},question:"\xbfSeguro quer\xe9s borrar este producto?"}),Object(n.jsx)(m.a,{container:!0,spacing:2,children:null===x||void 0===x?void 0:x.products.map((function(e){return Object(n.jsx)(m.a,{item:!0,xs:12,lg:+e.cols,children:Object(n.jsxs)(l.a,{children:[Object(n.jsxs)(d.a,{children:[Object(n.jsx)(p.a,{className:t.media,image:e.picture,title:e.name}),Object(n.jsxs)(j.a,{children:[Object(n.jsx)(h.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.name}),Object(n.jsx)(h.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description})]})]}),Object(n.jsxs)(O.a,{children:[Object(n.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return F.push("/products/".concat(e.id,"/edit"))},children:Object(n.jsx)(P.a,{})}),Object(n.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return t=e.id,q(!0),void z(t);var t},children:Object(n.jsx)(D.a,{})}),Object(n.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return function(t){var e=t.id,r=t.publish;U.a.firestore().collection("products").doc(e).update({publish:!r}).then((function(){return G()}))}(e)},children:e.publish?Object(n.jsx)(y.a,{}):Object(n.jsx)(v.a,{})})]})]})},e.id)}))})]}):Object(n.jsx)("div",{})})]})};var S=Object(i.a)((function(t){return{root:{overflow:"hidden",backgroundColor:t.palette.background.paper},floatRight:{float:"right"},gridList:{width:1200,height:"auto"},media:{height:140},marginTop:{margin:t.spacing("70px","auto")},icon:{color:"rgba(255, 255, 255, 0.54)"},title:{marginTop:"2rem",marginBottom:"2rem"}}}))},pqrm:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r("my7y")}])},qwQT:function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return O})),r.d(e,"c",(function(){return b}));var n=r("nKUr"),c=r("cpVT"),o=r("q1tI"),a=r.n(o),i=r("j7uD");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l=a.a.createContext({}),d={product:{},products:[]},p={CREATE_PRODUCT:"CREATE_PRODUCT",GET_PRODUCT:"GET_PRODUCT",GET_PRODUCTS:"GET_PRODUCTS",SET_PRODUCT:"SET_PRODUCT",SET_PRODUCTS:"SET_PRODUCTS",DELETE_PRODUCT:"DELETE_PRODUCT",UPDATE_PRODUCT:"UPDATE_PRODUCT"},j=function(t,e){switch(e.type){case p.CREATE_PRODUCT:var r=(new Date).getTime().toString();return void i.a.firestore().collection("products").doc(r).set(u(u({},e.payload),{},{id:r})).then((function(){return console.log("producto creado")})).catch((function(t){return console.log(t)}));case p.SET_PRODUCT:return u(u({},t),{},{product:e.payload});case p.SET_PRODUCTS:return u(u({},t),{},{products:e.payload});case p.DELETE_PRODUCT:return void i.a.firestore().collection("products").doc(e.payload.toString()).delete().then((function(){return console.log("elemento borrado")})).catch((function(t){return console.log(t)}));default:throw new Error("Unhandled action type: ".concat(e.type))}},O=function(t){var e=t.children,r=Object(o.useReducer)(j,d),c=r[0],a=r[1];return Object(n.jsx)(l.Provider,{value:[c,a],children:e})},b=function(){return Object(o.useContext)(l)}}},[["pqrm",0,1,4,5,2,3,6,7,10]]]);