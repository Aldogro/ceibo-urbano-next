_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{iD3m:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return n("npB8")}])},npB8:function(e,t,n){"use strict";n.r(t);var i=n("nKUr"),a=n("cpVT"),c=n("xvhg"),o=n("q1tI"),r=n.n(o),s=n("R/WZ"),l=n("Lqff"),u=n("HeWq"),p=n("NKQG"),d=n("iae6"),b=n("Ji2X"),g=n("tRbT"),j=n("r9w1"),f=n("Z3vd"),m=n("LnxZ"),h=n("p7UQ"),O=n("j7uD");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=v(),t=Object(l.b)(),n=Object(c.a)(t,2),a=n[0],s=(n[1],Object(u.b)()),x=Object(c.a)(s,2),y=x[0],N=(x[1],Object(o.useState)({mainImage:"",icon:"",phone:""})),S=N[0],_=N[1],D=Object(o.useState)({icon:!1}),P=D[0],E=D[1],T=Object(p.b)(),k=T.enqueueSnackbar;T.closeSnackbar;Object(o.useEffect)((function(){a.user.email||router.push("/login")}),[]),Object(o.useEffect)((function(){_({mainImage:y.mainImage,icon:y.icon,phone:y.phone})}),[y]);var C=function(e){e.preventDefault(),Object(O.e)({collection:"settings",id:"settings",data:S}).then((function(){localStorage.setItem("ceibo-urbano-settings",JSON.stringify(S)),k("Se ha editado la configuraci\xf3n",{variant:"success"})})).catch((function(e){return k("Ha ocurrido un error",{variant:"error"})}))};return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(h.a,{}),Object(i.jsxs)(b.a,{maxWidth:"lg",className:e.marginTop,children:[Object(i.jsx)("form",{className:e.stripped,onSubmit:function(e){return C(e)},noValidate:!0,autoComplete:"off",children:Object(i.jsxs)(g.a,{container:!0,spacing:3,cols:1,children:[Object(i.jsx)(g.a,{item:!0,xs:12,lg:9,children:Object(i.jsx)(j.a,{className:e.fullWidth,id:"Tel\xe9fono",label:"Tel\xe9fono (sin guiones, 0 ni 15. Ej: 3413216549)",value:S.phone,onChange:function(e){var t=e.target;return _(w(w({},S),{},{phone:t.value}))}})}),Object(i.jsx)(g.a,{item:!0,xs:12,lg:3,className:e.actions,children:Object(i.jsx)(f.a,{className:e.fullWidth,variant:"contained",disabled:S.phone===y.phone||!S.phone,type:"submit",color:"primary",children:"Guardar"})})]})}),Object(i.jsx)("form",{className:e.stripped,onSubmit:function(e){return C(e)},noValidate:!0,autoComplete:"off",children:Object(i.jsxs)(g.a,{container:!0,spacing:3,cols:1,children:[Object(i.jsx)(g.a,{item:!0,xs:12,lg:6,children:Object(i.jsx)(m.a,{acceptedFiles:["image/*"],filesLimit:1,maxFileSize:1e7,dropzoneText:"\xcdcono",onChange:function(e){return function(e){e.length&&(_(w(w({},S),{},{icon:""})),E(w(w({},P),{},{icon:!0})),O.c.storage().ref().child("/images").child(e[0].name).put(e[0]).then((function(e){return O.c.storage().ref(e.metadata.fullPath).getDownloadURL()})).then((function(e){E(w(w({},P),{},{icon:!1})),_(w(w({},S),{},{icon:e}))})))}(e)},onDelete:function(){return _(w(w({},S),{},{icon:""}))}})}),Object(i.jsx)(g.a,{className:e.imageContainer,item:!0,xs:12,lg:3,children:!S.icon&&P.icon?Object(i.jsx)(d.a,{}):Object(i.jsx)("img",{src:S.icon,alt:"logo",width:"100%"})}),Object(i.jsx)(g.a,{item:!0,xs:12,lg:3,className:e.actions,children:Object(i.jsx)(f.a,{className:e.fullWidth,variant:"contained",disabled:S.icon===y.icon||!S.icon,type:"submit",color:"primary",children:"Guardar"})})]})})]})]})};var v=Object(s.a)((function(e){return{root:{overflow:"hidden",backgroundColor:e.palette.background.paper},marginTop:{margin:e.spacing("70px","auto"),display:"grid",gap:e.spacing(4),flexDirection:"column"},stripped:{padding:e.spacing(3),"&:nth-child(odd)":{background:e.palette.lightGreen.main}},fullWidth:{width:"100%",maxHeigth:"100%",objectFit:"contain"},imageContainer:{marginTop:"auto",marginBottom:"auto",textAlign:"center"},actions:{margin:e.spacing("20px","auto"),display:"flex",alignItems:"flex-end"}}}))}},[["iD3m",1,2,4,5,0,3,7,6,8,9,10,11]]]);