_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"8V0Q":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/add",function(){return n("pIu5")}])},pIu5:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("xvhg"),a=n("q1tI"),i=n.n(a),o=n("20a2"),u=n("p7UQ"),s=n("Ji2X"),l=n("ofer"),d=n("vDbW"),j=n("R/WZ"),b=n("qwQT");t.default=function(){var e=Object(o.useRouter)(),t=Object(b.c)(""),n=Object(c.a)(t,2),a=(n[0],n[1]),j=O();return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(u.a,{}),Object(r.jsxs)(s.a,{maxWidth:"lg",children:[Object(r.jsx)(l.a,{className:j.title,variant:"h4",children:"Agregar producto"}),Object(r.jsx)(d.a,{onSubmit:function(t){return function(t){a({type:b.a.CREATE_PRODUCT,payload:t}),e.push("/products")}(t)}})]})]})};var O=Object(j.a)((function(e){return{title:{marginTop:"2rem",marginBottom:"2rem"}}}))},qwQT:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return f}));var r=n("nKUr"),c=n("cpVT"),a=n("q1tI"),i=n.n(a),o=n("j7uD");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=i.a.createContext({}),d={product:{},products:[]},j={CREATE_PRODUCT:"CREATE_PRODUCT",GET_PRODUCT:"GET_PRODUCT",GET_PRODUCTS:"GET_PRODUCTS",SET_PRODUCT:"SET_PRODUCT",SET_PRODUCTS:"SET_PRODUCTS",DELETE_PRODUCT:"DELETE_PRODUCT",UPDATE_PRODUCT:"UPDATE_PRODUCT"},b=function(e,t){switch(t.type){case j.CREATE_PRODUCT:var n=(new Date).getTime().toString();return void o.a.firestore().collection("products").doc(n).set(s(s({},t.payload),{},{id:n})).then((function(){return console.log("producto creado")})).catch((function(e){return console.log(e)}));case j.SET_PRODUCT:return s(s({},e),{},{product:t.payload});case j.SET_PRODUCTS:return s(s({},e),{},{products:t.payload});case j.DELETE_PRODUCT:return void o.a.firestore().collection("products").doc(t.payload.toString()).delete().then((function(){return console.log("elemento borrado")})).catch((function(e){return console.log(e)}));default:throw new Error("Unhandled action type: ".concat(t.type))}},O=function(e){var t=e.children,n=Object(a.useReducer)(b,d),c=n[0],i=n[1];return Object(r.jsx)(l.Provider,{value:[c,i],children:t})},f=function(){return Object(a.useContext)(l)}},vDbW:function(e,t,n){"use strict";var r=n("nKUr"),c=n("q1tI"),a=n.n(c),i=n("Z3vd"),o=n("tRbT"),u=n("r9w1"),s=n("LnxZ"),l=n("UhlP"),d=n("ZGBi"),j=n("R/WZ"),b=n("j7uD"),O=n("20a2");t.a=function(e){var t=e.product,n=void 0===t?{}:t,j=e.onSubmit,p=Object(c.useState)(""),h=p[0],g=p[1],m=Object(c.useState)(""),x=m[0],T=m[1],v=Object(c.useState)(""),D=v[0],E=v[1],P=Object(c.useState)(""),C=P[0],R=P[1],_=Object(c.useState)(""),y=_[0],U=_[1],w=Object(c.useState)(!1),S=w[0],N=w[1],W=Object(O.useRouter)(),k=function(e){e.preventDefault(),j({name:h,description:x,price:D,cols:C,picture:y,publish:S})};Object(c.useEffect)((function(){0!==Object.keys(n).length&&(g(n.name),T(n.description),E(n.price),R(n.cols),U(n.picture),N(n.publish))}),[n]);var A=f();return Object(r.jsx)(a.a.Fragment,{children:Object(r.jsxs)("form",{onSubmit:function(e){return k(e)},noValidate:!0,autoComplete:"off",children:[Object(r.jsxs)(o.a,{container:!0,spacing:3,cols:1,children:[Object(r.jsx)(o.a,{item:!0,xs:12,lg:3,children:Object(r.jsx)(d.a,{control:Object(r.jsx)(l.a,{checked:S,onChange:function(e){var t=e.target;return N(t.checked)},color:"primary"}),label:"Publicar"})}),Object(r.jsx)(o.a,{item:!0,xs:12,lg:6,children:Object(r.jsx)(u.a,{className:A.fullWidth,id:"Name",label:"Nombre",value:h,required:!0,onChange:function(e){var t=e.target;return g(t.value)}})}),Object(r.jsx)(o.a,{item:!0,xs:12,lg:3,children:Object(r.jsx)(u.a,{className:A.fullWidth,id:"cols",label:"Columnas",type:"number",value:C,onChange:function(e){var t=e.target;return R(t.value)}})}),Object(r.jsx)(o.a,{item:!0,xs:12,lg:6,children:Object(r.jsx)(u.a,{className:A.fullWidth,id:"Price",label:"Precio",type:"number",value:D,onChange:function(e){var t=e.target;return E(t.value)}})}),Object(r.jsx)(o.a,{item:!0,xs:12,lg:6,children:Object(r.jsx)(u.a,{className:A.fullWidth,id:"Description",label:"Descripci\xf3n",value:x,onChange:function(e){var t=e.target;return T(t.value)}})}),Object(r.jsx)(o.a,{item:!0,xs:12,lg:6,children:Object(r.jsx)(s.a,{acceptedFiles:["image/*"],filesLimit:1,onChange:function(e){return function(e){e.length&&b.a.storage().ref().child("/images").child(e[0].name).put(e[0]).then((function(e){return b.a.storage().ref(e.metadata.fullPath).getDownloadURL()})).then((function(e){return U(e)}))}(e)},onDelete:function(){return U("")}})}),y?Object(r.jsx)(o.a,{item:!0,xs:12,lg:6,children:Object(r.jsx)("div",{className:A.contain,children:Object(r.jsx)("img",{className:A.fullWidth,src:y,alt:"product image"})})}):Object(r.jsx)("div",{})]}),Object(r.jsxs)(o.a,{item:!0,xs:12,className:A.actions,children:[Object(r.jsx)(i.a,{className:A.floatRight,variant:"contained",type:"submit",color:"primary",children:"Guardar"}),Object(r.jsx)(i.a,{className:A.floatRight,variant:"contained",color:"secondary",onClick:function(){return W.push("/products")},children:"Cancelar"})]})]})})};var f=Object(j.a)((function(e){return{actions:{margin:e.spacing("20px","auto")},contain:{maxHeight:"250px",width:"100%",display:"flex"},fullWidth:{width:"100%",maxHeigth:"100%",objectFit:"contain"},floatRight:{minWidth:120,float:"right",marginLeft:16}}}))}},[["8V0Q",0,1,4,5,2,3,6,7,8,9]]]);