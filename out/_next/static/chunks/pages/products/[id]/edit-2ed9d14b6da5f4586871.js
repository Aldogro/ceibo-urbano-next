_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{flON:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]/edit",function(){return n("rRTN")}])},jjAL:function(e,t,n){"use strict";var a=n("Ff2n"),r=n("rePB"),c=n("wx14"),i=n("q1tI"),o=(n("17x9"),n("iuhU")),s=n("H2TA"),u=n("tVbE"),l=i.forwardRef((function(e,t){var n,r=e.classes,s=e.className,l=e.component,d=void 0===l?"li":l,b=e.disableGutters,j=void 0!==b&&b,p=e.ListItemClasses,m=e.role,O=void 0===m?"menuitem":m,f=e.selected,h=e.tabIndex,g=Object(a.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==h?h:-1),i.createElement(u.a,Object(c.a)({button:!0,role:O,tabIndex:n,component:d,selected:f,disableGutters:j,classes:Object(c.a)({dense:r.dense},p),className:Object(o.a)(r.root,s,f&&r.selected,!j&&r.gutters),ref:t},g))}));t.a=Object(s.a)((function(e){return{root:Object(c.a)({},e.typography.body1,Object(r.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(c.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(l)},qwQT:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return j}));var a=n("nKUr"),r=n("cpVT"),c=n("q1tI");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=n.n(c).a.createContext({}),u={product:{},products:[]},l={SET_PRODUCT:"SET_PRODUCT",SET_PRODUCTS:"SET_PRODUCTS"},d=function(e,t){switch(t.type){case l.SET_PRODUCT:return o(o({},e),{},{product:t.payload});case l.SET_PRODUCTS:return o(o({},e),{},{products:t.payload});default:throw new Error("Unhandled action type: ".concat(t.type))}},b=function(e){var t=e.children,n=Object(c.useReducer)(d,u),r=n[0],i=n[1];return Object(a.jsx)(s.Provider,{value:[r,i],children:t})},j=function(){return Object(c.useContext)(s)}},rRTN:function(e,t,n){"use strict";n.r(t);var a=n("cpVT"),r=n("nKUr"),c=n("xvhg"),i=n("q1tI"),o=n.n(i),s=n("20a2"),u=n("R/WZ"),l=n("NKQG"),d=n("qwQT"),b=n("p7UQ"),j=n("vDbW"),p=n("Ji2X"),m=n("ofer"),O=n("j7uD");t.default=function(){var e=Object(d.c)(),t=Object(c.a)(e,2),n=t[0],a=t[1],u=f(),h=Object(s.useRouter)(),g=Object(l.b)(),x=g.enqueueSnackbar;g.closeSnackbar;Object(i.useEffect)((function(){var e=h.query.id;h.query.id&&v(e)}),[h.query]);var v=function(e){Object(O.g)({collection:"products",id:e}).then((function(e){a({type:d.a.SET_PRODUCT,payload:e.data()})}))};return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)(b.a,{}),Object(r.jsx)(p.a,{maxWidth:"lg",className:u.container,children:Object(r.jsxs)("div",{className:u.root,children:[Object(r.jsx)(m.a,{className:u.title,variant:"h4",children:"Editar Productos"}),null!==n&&void 0!==n&&n.product?Object(r.jsx)(j.a,{onSubmit:function(e){return function(e){Object(O.e)({collection:"products",id:h.query.id,data:e}).then((function(){x("Se ha editado el producto correctamente",{variant:"success"}),h.push("/products")})).catch((function(e){return x("Ha ocurrido un error",{variant:"error"})}))}(e)},product:n.product}):null]})})]})};var f=Object(u.a)((function(e){return{root:{overflow:"hidden",backgroundColor:e.palette.background.paper},container:{margin:e.spacing("70px","auto")},title:Object(a.a)({marginTop:"1rem",marginBottom:"1rem",fontSize:"18px"},e.breakpoints.up("sm"),{marginTop:"2rem",marginBottom:"1rem",fontSize:"24px"})}}))},vDbW:function(e,t,n){"use strict";var a=n("nKUr"),r=n("q1tI"),c=n.n(r),i=n("Z3vd"),o=n("tRbT"),s=n("ZGBi"),u=n("1AYd"),l=n("jjAL"),d=n("cVXz"),b=n("UhlP"),j=n("r9w1"),p=n("iae6"),m=n("LnxZ"),O=n("R/WZ"),f=n("20a2"),h=n("g7JS"),g=n("j7uD");t.a=function(e){var t=e.product,n=void 0===t?{}:t,O=e.onSubmit,v=Object(r.useState)(""),y=v[0],S=v[1],w=Object(r.useState)(""),T=w[0],N=w[1],P=Object(r.useState)(0),C=P[0],D=P[1],E=Object(r.useState)(""),R=E[0],_=E[1],k=Object(r.useState)(""),U=k[0],q=k[1],I=Object(r.useState)(!1),W=I[0],L=I[1],z=Object(r.useState)(null),B=z[0],G=z[1],H=Object(r.useState)(!1),A=H[0],F=H[1],V=Object(f.useRouter)();Object(r.useEffect)((function(){0!==Object.keys(n).length&&(S(n.name),N(n.description),D(+n.price),_(n.cols),q(n.picture),L(n.publish),G(n.type))}),[n]);var Z=function(e){e.preventDefault(),O({name:y,description:T,price:+C,cols:R,picture:U,publish:W,type:B})},J=x();return Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)("form",{onSubmit:function(e){return Z(e)},noValidate:!0,autoComplete:"off",children:[Object(a.jsxs)(o.a,{container:!0,spacing:3,cols:1,children:[Object(a.jsx)(o.a,{item:!0,xs:12,lg:12,children:Object(a.jsx)(s.a,{control:Object(a.jsx)(b.a,{checked:W,onChange:function(e){var t=e.target;return L(t.checked)},color:"primary"}),label:"Publicar"})}),Object(a.jsx)(o.a,{item:!0,xs:12,lg:5,children:Object(a.jsx)(j.a,{className:J.fullWidth,id:"Name",label:"Nombre",value:y,required:!0,onChange:function(e){var t=e.target;return S(t.value)}})}),Object(a.jsx)(o.a,{item:!0,xs:12,lg:7,children:Object(a.jsx)(j.a,{className:J.fullWidth,id:"Description",label:"Descripci\xf3n",value:T,onChange:function(e){var t=e.target;return N(t.value)}})}),Object(a.jsx)(o.a,{item:!0,xs:12,lg:4,children:Object(a.jsx)(j.a,{className:J.fullWidth,id:"cols",label:"Columnas",type:"number",value:R,onChange:function(e){var t=e.target;return _(t.value)}})}),Object(a.jsx)(o.a,{item:!0,xs:12,lg:4,children:Object(a.jsx)(j.a,{className:J.fullWidth,id:"Price",label:"Precio",type:"number",value:C,onChange:function(e){var t=e.target;return D(+t.value)}})}),Object(a.jsxs)(o.a,{item:!0,xs:12,lg:4,children:[Object(a.jsx)(u.a,{id:"demo-simple-select-label",children:"Tipo"}),Object(a.jsx)(d.a,{className:J.fullWidth,labelId:"demo-simple-select-label",id:"demo-simple-select",value:B,onChange:function(e){var t=e.target;return G(t.value)},children:h.c.map((function(e){return Object(a.jsx)(l.a,{value:e.key,children:e.label},e.key)}))})]}),Object(a.jsx)(o.a,{item:!0,xs:12,lg:6,children:Object(a.jsx)(m.a,{acceptedFiles:["image/*"],filesLimit:1,maxFileSize:1e7,dropzoneText:"Imagen principal",onChange:function(e){return function(e){e.length&&(F(!0),q(""),g.c.storage().ref().child("/images").child(e[0].name).put(e[0]).then((function(e){return g.c.storage().ref(e.metadata.fullPath).getDownloadURL()})).then((function(e){q(e),F(!1)})))}(e)},onDelete:function(){return q("")}})}),Object(a.jsx)(o.a,{item:!0,xs:12,lg:6,className:J.contain,children:!U&&A?Object(a.jsx)(p.a,{}):Object(a.jsx)("img",{className:J.image,src:U,alt:"product image",height:"100%"})})]}),Object(a.jsxs)(o.a,{item:!0,xs:12,className:J.actions,children:[Object(a.jsx)(i.a,{className:J.floatRight,disabled:!(U.length>0),variant:"contained",type:"submit",color:"primary",children:"Guardar"}),Object(a.jsx)(i.a,{className:J.floatRight,variant:"contained",color:"secondary",onClick:function(){return V.push("/products")},children:"Cancelar"})]})]})})};var x=Object(O.a)((function(e){return{actions:{margin:e.spacing("20px","auto")},contain:{marginTop:"auto",marginBottom:"auto",textAlign:"center"},image:{maxHeight:"250px"},fullWidth:{width:"100%"},floatRight:{minWidth:120,float:"right",marginLeft:16}}}))}},[["flON",1,2,4,5,0,3,7,6,8,9,10,11]]]);