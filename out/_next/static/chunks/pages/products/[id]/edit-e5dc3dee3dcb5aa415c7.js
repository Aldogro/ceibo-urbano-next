_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{Qyx7:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return p}));var n=r("nKUr"),a=r("cpVT"),c=r("q1tI");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=r.n(c).a.createContext({}),u={product:{},products:[]},l={SET_PRODUCT:"SET_PRODUCT",SET_PRODUCTS:"SET_PRODUCTS"},d=function(e,t){switch(t.type){case l.SET_PRODUCT:return o(o({},e),{},{product:t.payload});case l.SET_PRODUCTS:return o(o({},e),{},{products:t.payload});default:throw new Error("Unhandled action type: ".concat(t.type))}},b=function(e){var t=e.children,r=Object(c.useReducer)(d,u),a=r[0],i=r[1];return Object(n.jsx)(s.Provider,{value:[a,i],children:t})},p=function(){return Object(c.useContext)(s)}},RA18:function(e,t,r){"use strict";var n=r("nKUr"),a=r("vJKn"),c=r.n(a),i=r("rg98"),o=r("q1tI"),s=r.n(o),u=r("Z3vd"),l=r("tRbT"),d=r("ZGBi"),b=r("1AYd"),p=r("jjAL"),j=r("cVXz"),m=r("UhlP"),f=r("r9w1"),O=r("iae6"),h=r("LnxZ"),g=r("R/WZ"),x=r("20a2"),v=r("ifY1"),y=r("5Mca");t.a=function(e){var t=e.product,r=void 0===t?{}:t,a=e.onSubmit,g=Object(o.useState)(""),S=g[0],N=g[1],T=Object(o.useState)(""),P=T[0],C=T[1],k=Object(o.useState)(0),E=k[0],R=k[1],_=Object(o.useState)(""),D=_[0],U=_[1],I=Object(o.useState)(""),q=I[0],W=I[1],L=Object(o.useState)(!1),A=L[0],H=L[1],z=Object(o.useState)(null),B=z[0],G=z[1],K=Object(o.useState)(!1),F=K[0],J=K[1],V=Object(x.useRouter)();Object(o.useEffect)((function(){0!==Object.keys(r).length&&(N(r.name),C(r.description),R(+r.price),U(r.cols),W(r.picture),H(r.publish),G(r.type))}),[r]);var Z=function(e){e.preventDefault(),a({name:S,description:P,price:+E,cols:D,picture:q,publish:A,type:B})},M=w(),X=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=11;break}return J(!0),W(""),e.next=5,y.c.storage().ref().child("/images").child(t[0].name).put(t[0]);case 5:return r=e.sent,e.next=8,y.c.storage().ref(r.metadata.fullPath).getDownloadURL();case 8:n=e.sent,W(n),J(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("form",{onSubmit:function(e){return Z(e)},noValidate:!0,autoComplete:"off",children:[Object(n.jsxs)(l.a,{container:!0,spacing:3,cols:1,children:[Object(n.jsx)(l.a,{item:!0,xs:12,lg:12,children:Object(n.jsx)(d.a,{control:Object(n.jsx)(m.a,{checked:A,onChange:function(e){var t=e.target;return H(t.checked)},color:"primary"}),label:"Publicar"})}),Object(n.jsx)(l.a,{item:!0,xs:12,lg:5,children:Object(n.jsx)(f.a,{className:M.fullWidth,id:"Name",label:"Nombre",value:S,required:!0,onChange:function(e){var t=e.target;return N(t.value)}})}),Object(n.jsx)(l.a,{item:!0,xs:12,lg:7,children:Object(n.jsx)(f.a,{className:M.fullWidth,id:"Description",label:"Descripci\xf3n",value:P,onChange:function(e){var t=e.target;return C(t.value)}})}),Object(n.jsx)(l.a,{item:!0,xs:12,lg:4,children:Object(n.jsx)(f.a,{className:M.fullWidth,id:"cols",label:"Columnas",type:"number",value:D,onChange:function(e){var t=e.target;return U(t.value)}})}),Object(n.jsx)(l.a,{item:!0,xs:12,lg:4,children:Object(n.jsx)(f.a,{className:M.fullWidth,id:"Price",label:"Precio",type:"number",value:E,onChange:function(e){var t=e.target;return R(+t.value)}})}),Object(n.jsxs)(l.a,{item:!0,xs:12,lg:4,children:[Object(n.jsx)(b.a,{id:"demo-simple-select-label",children:"Tipo"}),Object(n.jsx)(j.a,{className:M.fullWidth,labelId:"demo-simple-select-label",id:"demo-simple-select",value:B,onChange:function(e){var t=e.target;return G(t.value)},children:v.c.map((function(e){return Object(n.jsx)(p.a,{value:e.key,children:e.label},e.key)}))})]}),Object(n.jsx)(l.a,{item:!0,xs:12,lg:6,children:Object(n.jsx)(h.a,{acceptedFiles:["image/*"],filesLimit:1,maxFileSize:1e7,dropzoneText:"Imagen principal",onChange:function(e){return X(e)},onDelete:function(){return W("")}})}),Object(n.jsx)(l.a,{item:!0,xs:12,lg:6,className:M.contain,children:!q&&F?Object(n.jsx)(O.a,{}):Object(n.jsx)("img",{className:M.image,src:q,alt:"product image",height:"100%"})})]}),Object(n.jsxs)(l.a,{item:!0,xs:12,className:M.actions,children:[Object(n.jsx)(u.a,{className:M.floatRight,disabled:!(q.length>0),variant:"contained",type:"submit",color:"primary",children:"Guardar"}),Object(n.jsx)(u.a,{className:M.floatRight,variant:"contained",color:"secondary",onClick:function(){return V.push("/products")},children:"Cancelar"})]})]})})};var w=Object(g.a)((function(e){return{actions:{margin:e.spacing("20px","auto")},contain:{marginTop:"auto",marginBottom:"auto",textAlign:"center"},image:{maxHeight:"250px"},fullWidth:{width:"100%"},floatRight:{minWidth:120,float:"right",marginLeft:16}}}))},"cb+r":function(e,t,r){"use strict";r.r(t);var n=r("cpVT"),a=r("nKUr"),c=r("vJKn"),i=r.n(c),o=r("rg98"),s=r("xvhg"),u=r("q1tI"),l=r.n(u),d=r("20a2"),b=r("R/WZ"),p=r("NKQG"),j=r("Qyx7"),m=r("g009"),f=r("RA18"),O=r("Ji2X"),h=r("ofer"),g=r("5Mca");t.default=function(){var e=Object(j.c)(),t=Object(s.a)(e,2),r=t[0],n=t[1],c=x(),b=Object(d.useRouter)(),v=Object(p.b)(),y=v.enqueueSnackbar;v.closeSnackbar;Object(u.useEffect)((function(){var e=b.query.id;b.query.id&&w(e)}),[b.query]);var w=function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.g)({collection:"products",id:t});case 3:r=e.sent,n({type:j.a.SET_PRODUCT,payload:r.data()}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y("Ha ocurrido un error al obtener el producto",{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.e)({collection:"products",id:b.query.id,data:t});case 3:y("Se ha editado el producto correctamente",{variant:"success"}),b.push("/products"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y("Ha ocurrido un error al intentar editar",{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(l.a.Fragment,{children:[Object(a.jsx)(m.a,{}),Object(a.jsx)(O.a,{maxWidth:"lg",className:c.container,children:Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(h.a,{className:c.title,variant:"h4",children:"Editar Productos"}),null!==r&&void 0!==r&&r.product?Object(a.jsx)(f.a,{onSubmit:function(e){return S(e)},product:r.product}):null]})})]})};var x=Object(b.a)((function(e){return{root:{overflow:"hidden",backgroundColor:e.palette.background.paper},container:{margin:e.spacing("70px","auto")},title:Object(n.a)({marginTop:"1rem",marginBottom:"1rem",fontSize:"18px"},e.breakpoints.up("sm"),{marginTop:"2rem",marginBottom:"1rem",fontSize:"24px"})}}))},flON:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]/edit",function(){return r("cb+r")}])},jjAL:function(e,t,r){"use strict";var n=r("Ff2n"),a=r("rePB"),c=r("wx14"),i=r("q1tI"),o=(r("17x9"),r("iuhU")),s=r("H2TA"),u=r("tVbE"),l=i.forwardRef((function(e,t){var r,a=e.classes,s=e.className,l=e.component,d=void 0===l?"li":l,b=e.disableGutters,p=void 0!==b&&b,j=e.ListItemClasses,m=e.role,f=void 0===m?"menuitem":m,O=e.selected,h=e.tabIndex,g=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(r=void 0!==h?h:-1),i.createElement(u.a,Object(c.a)({button:!0,role:f,tabIndex:r,component:d,selected:O,disableGutters:p,classes:Object(c.a)({dense:a.dense},j),className:Object(o.a)(a.root,s,O&&a.selected,!p&&a.gutters),ref:t},g))}));t.a=Object(s.a)((function(e){return{root:Object(c.a)({},e.typography.body1,Object(a.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(c.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(l)}},[["flON",1,2,4,5,0,3,7,6,8,9,10,11]]]);