_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{"8V0Q":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/add",function(){return a("F9EX")}])},F9EX:function(e,t,a){"use strict";a.r(t);var n=a("cpVT"),r=a("nKUr"),c=a("vJKn"),i=a.n(c),s=a("rg98"),o=a("q1tI"),l=a.n(o),u=a("20a2"),d=a("R/WZ"),b=a("NKQG"),m=a("g009"),j=a("Ji2X"),p=a("ofer"),h=a("RA18"),g=a("5Mca");t.default=function(){var e=Object(u.useRouter)(),t=f(),a=Object(b.b)(),n=a.enqueueSnackbar,c=(a.closeSnackbar,function(){var t=Object(s.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g.a)({collection:"products",data:a});case 3:n("Se ha creado el producto correctamente",{variant:"success"}),e.push("/products"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n("Ha ocurrido un error al intentar guardar el producto",{variant:"error"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}());return Object(r.jsxs)(l.a.Fragment,{children:[Object(r.jsx)(m.a,{}),Object(r.jsx)(j.a,{maxWidth:"lg",className:t.container,children:Object(r.jsxs)("div",{className:t.root,children:[Object(r.jsx)(p.a,{className:t.title,variant:"h4",children:"Agregar producto"}),Object(r.jsx)(h.a,{onSubmit:function(e){return c(e)}})]})})]})};var f=Object(d.a)((function(e){return{root:{overflow:"hidden",backgroundColor:e.palette.background.paper},container:{margin:e.spacing("70px","auto")},title:Object(n.a)({marginTop:"1rem",marginBottom:"1rem",fontSize:"18px"},e.breakpoints.up("sm"),{marginTop:"2rem",marginBottom:"1rem",fontSize:"24px"})}}))},RA18:function(e,t,a){"use strict";var n=a("nKUr"),r=a("vJKn"),c=a.n(r),i=a("rg98"),s=a("q1tI"),o=a.n(s),l=a("Z3vd"),u=a("tRbT"),d=a("ZGBi"),b=a("1AYd"),m=a("jjAL"),j=a("cVXz"),p=a("UhlP"),h=a("r9w1"),g=a("iae6"),f=a("LnxZ"),x=a("R/WZ"),O=a("20a2"),v=a("ifY1"),w=a("5Mca");t.a=function(e){var t=e.product,a=void 0===t?{}:t,r=e.onSubmit,x=Object(s.useState)(""),y=x[0],S=x[1],k=Object(s.useState)(""),C=k[0],R=k[1],_=Object(s.useState)(0),I=_[0],T=_[1],E=Object(s.useState)(""),W=E[0],A=E[1],L=Object(s.useState)(""),P=L[0],F=L[1],z=Object(s.useState)(!1),B=z[0],G=z[1],H=Object(s.useState)(null),V=H[0],X=H[1],q=Object(s.useState)(!1),D=q[0],J=q[1],K=Object(O.useRouter)();Object(s.useEffect)((function(){0!==Object.keys(a).length&&(S(a.name),R(a.description),T(+a.price),A(a.cols),F(a.picture),G(a.publish),X(a.type))}),[a]);var U=function(e){e.preventDefault(),r({name:y,description:C,price:+I,cols:W,picture:P,publish:B,type:V})},Z=N(),M=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=11;break}return J(!0),F(""),e.next=5,w.c.storage().ref().child("/images").child(t[0].name).put(t[0]);case 5:return a=e.sent,e.next=8,w.c.storage().ref(a.metadata.fullPath).getDownloadURL();case 8:n=e.sent,F(n),J(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(o.a.Fragment,{children:Object(n.jsxs)("form",{onSubmit:function(e){return U(e)},noValidate:!0,autoComplete:"off",children:[Object(n.jsxs)(u.a,{container:!0,spacing:3,cols:1,children:[Object(n.jsx)(u.a,{item:!0,xs:12,lg:12,children:Object(n.jsx)(d.a,{control:Object(n.jsx)(p.a,{checked:B,onChange:function(e){var t=e.target;return G(t.checked)},color:"primary"}),label:"Publicar"})}),Object(n.jsx)(u.a,{item:!0,xs:12,lg:5,children:Object(n.jsx)(h.a,{className:Z.fullWidth,id:"Name",label:"Nombre",value:y,required:!0,onChange:function(e){var t=e.target;return S(t.value)}})}),Object(n.jsx)(u.a,{item:!0,xs:12,lg:7,children:Object(n.jsx)(h.a,{className:Z.fullWidth,id:"Description",label:"Descripci\xf3n",value:C,onChange:function(e){var t=e.target;return R(t.value)}})}),Object(n.jsx)(u.a,{item:!0,xs:12,lg:4,children:Object(n.jsx)(h.a,{className:Z.fullWidth,id:"cols",label:"Columnas",type:"number",value:W,onChange:function(e){var t=e.target;return A(t.value)}})}),Object(n.jsx)(u.a,{item:!0,xs:12,lg:4,children:Object(n.jsx)(h.a,{className:Z.fullWidth,id:"Price",label:"Precio",type:"number",value:I,onChange:function(e){var t=e.target;return T(+t.value)}})}),Object(n.jsxs)(u.a,{item:!0,xs:12,lg:4,children:[Object(n.jsx)(b.a,{id:"demo-simple-select-label",children:"Tipo"}),Object(n.jsx)(j.a,{className:Z.fullWidth,labelId:"demo-simple-select-label",id:"demo-simple-select",value:V,onChange:function(e){var t=e.target;return X(t.value)},children:v.c.map((function(e){return Object(n.jsx)(m.a,{value:e.key,children:e.label},e.key)}))})]}),Object(n.jsx)(u.a,{item:!0,xs:12,lg:6,children:Object(n.jsx)(f.a,{acceptedFiles:["image/*"],filesLimit:1,maxFileSize:1e7,dropzoneText:"Imagen principal",onChange:function(e){return M(e)},onDelete:function(){return F("")}})}),Object(n.jsx)(u.a,{item:!0,xs:12,lg:6,className:Z.contain,children:!P&&D?Object(n.jsx)(g.a,{}):Object(n.jsx)("img",{className:Z.image,src:P,alt:"product image",height:"100%"})})]}),Object(n.jsxs)(u.a,{item:!0,xs:12,className:Z.actions,children:[Object(n.jsx)(l.a,{className:Z.floatRight,disabled:!(P.length>0),variant:"contained",type:"submit",color:"primary",children:"Guardar"}),Object(n.jsx)(l.a,{className:Z.floatRight,variant:"contained",color:"secondary",onClick:function(){return K.push("/products")},children:"Cancelar"})]})]})})};var N=Object(x.a)((function(e){return{actions:{margin:e.spacing("20px","auto")},contain:{marginTop:"auto",marginBottom:"auto",textAlign:"center"},image:{maxHeight:"250px"},fullWidth:{width:"100%"},floatRight:{minWidth:120,float:"right",marginLeft:16}}}))},jjAL:function(e,t,a){"use strict";var n=a("Ff2n"),r=a("rePB"),c=a("wx14"),i=a("q1tI"),s=(a("17x9"),a("iuhU")),o=a("H2TA"),l=a("tVbE"),u=i.forwardRef((function(e,t){var a,r=e.classes,o=e.className,u=e.component,d=void 0===u?"li":u,b=e.disableGutters,m=void 0!==b&&b,j=e.ListItemClasses,p=e.role,h=void 0===p?"menuitem":p,g=e.selected,f=e.tabIndex,x=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==f?f:-1),i.createElement(l.a,Object(c.a)({button:!0,role:h,tabIndex:a,component:d,selected:g,disableGutters:m,classes:Object(c.a)({dense:r.dense},j),className:Object(s.a)(r.root,o,g&&r.selected,!m&&r.gutters),ref:t},x))}));t.a=Object(o.a)((function(e){return{root:Object(c.a)({},e.typography.body1,Object(r.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(c.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(u)}},[["8V0Q",1,2,4,5,0,3,7,6,8,9,10,11]]]);